
var questions = [
    { letter: "a", status: 0, question: {
    	q1: ("CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien."),
    	a1: "abducir",
    	q2: ("CON LA A. Famosa saga de películas protagonizada por Sigourney Weaver."),
    	a2: "alien",
    	q3: ("CON LA A. El día anterior a hoy."),
    	a3: "ayer",
    	}, 
    },
    { letter: "b", status: 0, question: {
    	q1: ("CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso"),
    	a1: "bingo",
    	q2: ("CON LA B. Ciudad de origen de SkyLab Coders"),
    	a2: "barcelona",
    	q3:('CON LA B. Mítico grupo navarro de rock que veía todo "En blanco y negro"'),
    	a3:	"barricada"
    	},
	},
    { letter: "c", status: 0, question: {
    	q1: ("CON LA C. Bebida alcohólica hecha con granos germinados de cebada u otros cereales fermentados en agua"),
    	a1: "cerveza",
    	q2: ("CON LA C. Suceso que produce gran destrucción o daño"),
    	a2: "catastrofe",
    	q3: ("CON LA C. Uno de los lados de una moneda"),
    	a3: "cara",
    	},
    },
    { letter: "d", status: 0, question: {
    	q1: ("CON LA D. Arma blanca, de hoja corta"),
    	a1: "daga",
    	q2: ("CON LA D. Piedra preciosa constituida por carbono cristalizado"),
    	a2: "diamante",
    	q3: ("CON LA D. membrana formada en su mayor parte por fibras musculares, que separa la cavidad torácica de la abdominal."),
    	a3: "diafragma",
    	},
	},
    { letter: "e", status: 0, question: {
    	q1: ("CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación"), 
    	a1: "ectoplasma",
    	q2:("CON LA E. Rey del Rock & Roll"),
    	a2: "elvis",
    	q3:("CON LA E. De estatura muy baja"),
    	a3: "enano",
    	},
	},
    { letter: "f", status: 0, question: {
    	q1: ("CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad"),
    	a1: "facil",
    	q2: ("CON LA F. Temor angustioso e incontrolable"),
    	a2: "fobia",
    	q3: ("CON LA F. Ciencia que estudia las propiedades de la materia y de la energía"),
    	a3: "fisica",
    	},
    },
    { letter: "g", status: 0, question: {
    	q1: ("CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas"), 
    	a1: "galaxia",
    	q2: ("CON LA G. Mascota que no deberías mojar ni alimentar despues de medianoche"), 
    	a2: "Gremlin",
    	q3: ("CON LA G. Turista extranjero"), 
    	a3: "guiri",
    	},
    },
    { letter: "h", status: 0, question: {
    	q1:("CON LA H. Suicidio ritual japonés por desentrañamiento"), 
    	a1: "harakiri",
    	q2: ("CON LA H. Material del muro que defiende la guardia de la noche en Juego de Tronos"), 
    	a2: "hielo",
    	q3: ("CON LA H. Ejercer un maleficio sobre alguien por medio de prácticas mágicas."),
    	a3: "hechizar",
    	},
    },
    { letter: "i", status: 0, question: {
    	q1: ("CON LA i. Contrario a la ley"), 
    	a1: "ilegal",
    	q2: ("CON LA i. Tonto, idiota, falto de inteligencia"),
    	a2: "imbecil",
    	q3: ("CON LA i.  Facultad para discurrir o inventar con prontitud y facilidad"),
    	a3: "ingenio",
    	},
    },
    { letter: "j", status: 0, question: {
    	q1: ("CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba"), 
    	a1: "jabali",
    	q2: ("CON LA J. Persona que tiene autoridad y potestad para decidir y sentenciar."), 
    	a2: "juez",
    	q3: ("CON LA J. Alegre, festivo, apacible."), 
    	a3: "jovial",
    	},
    },
    { letter: "k", status: 0, question: {
    	q1: ("CON LA K. Persona que se juega la vida realizando una acción temeraria"), 
    	a1: "kamikaze",
    	q2: ("CON LA K. Texto hindú que trata sobre el comportamiento sexual humano"),
    	a2: "kamasutra",
    	q3: ("CON LA K. Mamífero marsupial arborícola parecido a un oso pequeño"),
    	a3: "koala",
    	},
    },
    { letter: "l", status: 0, question: {
    	q1: ("CON LA L. Hombre lobo"), 
    	a1:  "licantropo",
    	q2: ("CON LA L. Principal unidad militar de la antigua Roma"),
    	a2: "legion",
    	q3: ("CON LA L. Lugar formado por calles y encrucijadas para confundir a quien se adentre en él."),
    	a3: "laberinto",
    	},
    },
    { letter: "m", status: 0, question: {
    	q1: ("CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas"), 
    	a1: "misantropo", 
    	q2:  ("CON LA M. Mezcla de harina con agua y levadura, para hacer el pan."), 
    	a2: "masa", 
    	q3: ("CON LA M. Persona que trata o comercia con géneros vendibles."), 
    	a3: "mercader", 
    	},
    },
    { letter: "n", status: 0, question: {
    	q1: ("CON LA N. Demostración de poca inteligencia"), 
    	a1: "necedad",
    	q2: ("CON LA N. Nube muy baja, que dificulta la visión según la concentración de las gotas que la forman."), 
    	a2: "niebla",
    	q3: ("CON LA N. Recién hecho o fabricado."), 
    	a3: "nuevo",
    	},
    },
    { letter: "ñ", status: 0, question: {
    	q1: ("CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo."), 
    	a1:  "señal",
    	q2: ("CONTIENE LA Ñ.  Dicho de una cosa: Que tiene uno o más años."), 
    	a2:  "añejo",
    	q3: ("CONTIENE LA Ñ. Construcción rústica pequeña, de materiales pobres, destinada a refugio o vivienda."), 
    	a3:  "cabaña",
    	},
    },
    { letter: "o", status: 0, question: {
    	q1: ("CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien"), 
    	a1: "orco", 
    	q2: ("CON LA O. Formación de una palabra por imitación del sonido de aquello que designa."),
    	a2: "onomatopeya", 
    	q3: ("CON LA O. Humillar o herir el amor propio o la dignidad de alguien."),
    	a3: "ofender", 
    	},
    },
    { letter: "p", status: 0, question: {
    	q1: ("CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft"), 
    	a1:  "protoss",
    	q2: ("CON LA P. Dicho de una persona: Engreída y que hace inoportuno y vano alarde de erudiciónv téngala o no en realidad."), 
    	a2: "pedante",
    	q3: ("CON LA P.  En la antigua Roma, dicho de una persona: Que formaba parte de la clase social privilegiada."), 
    	a3: "patricio",
    	},
    },
    { letter: "q", status: 0, question: {
    	q1: ("CON LA Q. Producto obtenido por la maduración de la cuajada de la leche"), 
    	a1:  "queso",
    	q2: ("CON LA Q.  Partícula elemental que es componente de otras partículas subatómicas, como el protón y el neutrón"), 
    	a2: "quark",
    	q3: ("CON LA Q. En la mitología clásica, monstruo imaginario que vomitaba llamas y tenía cabeza de león, vientre de cabra y cola de dragón."), 
    	a3: "quimera",
    	},
    },
    { letter: "r", status: 0, question: {
    	q1: ("CON LA R. Ración de trozos de calamares rebozados y fritos."), 
		a1: "rabas",
    	q2: ("CON LA R. Ira, enojo, enfado grande."),
    	a2: "rabia",
    	q3: ("CON LA R. Encargo, encomienda."),
    	a3: "recado",
    	},
	},
    { letter: "s", status: 0, question: {
    	q1: ("CON LA S. Comunidad salvadora de todo desarrollador informático"), 
    	a1: "stackoverflow",
    	q2: ("CON LA S. Anhelar persistentemente algo."),
    	a2: "soñar",
    	q3: ("CON LA S. Recopilación de obras de Tolkien, editada y publicada póstumamente por su hijo."),
    	a3: "Silmarillion ",
    	},
    },
    { letter: "t", status: 0, question: {
    	q1: ("CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984"), 
    	a1: "terminator",
    	q2: ("CON LA T. En la mitología griega, héroe ateniense que se enfrentó al minotauro."), 
    	a2: "teseo",
    	q3: ("CON LA T. Dicho de una persona: De un pueblo bereber nómada del Sahara."),  	
    	a3: "tuareg",
    	},
    },
    { letter: "u", status: 0, question: {
    	q1: ("CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914"),
    	a1: "unamuno",
    	q2: ("CON LA U. Parte de la medicina referente al aparato urinario"),
    	a2: "urologia",
    	q3: ("CON LA U. Animal fabuloso de forma de caballo y con un cuerno recto en mitad de la frente"),
    	a3: "unicornio",
    	},
     },
    { letter: "v", status: 0, question: {
    	q1: ("CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa"), 
    	a1: "vikingos",
    	q2: ("CON LA V. Dicho de la tierra: Que no ha sido arada o cultivada"),
    	a2: "virgen",
    	q3: ("CON LA V. Conjunto de platos, fuentes, vasos, tazas, etc., que se destinan al servicio de la mesa"),
    	a3: "vajilla",
    	},
    },
    { letter: "w", status: 0, question: {
    	q1: ("CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso"), 
    	a1: "sandwich", 
    	q2: ("CON LA W. Transmisor y receptor portátil de radio que sirve para comunicaciones de corta distancia"), 
    	a2: "walkie-talkie", 
    	q3: ("CONTIENE LA W. Conjunto de aparatos de una computadora"), 
    	a3: "hardware", 
    	},
    },
    { letter: "x", status: 0, question: {
    	q1: ("CONTIENE LA x. Toxina bacteriana utilizada en cirujía estética"),
    	a1:  "botox",
    	q2: ("CONTIENE LA x. Emitir palabras con fuerza o vehemencia para para dar vigor a lo que se dice."),
    	a2: "exclamar",
    	q3: ("CONTIENE LA x. Nombre del cantante de Guns N' Roses"),
    	a3: "axel",
    	},
    },
    { letter: "y", status: 0, question: {
    	q1: ("CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos"), 
    	a1:  "peyote",
    	q2: ("CONTIENE LA Y. Confirmar, probar, sostener alguna opinión o doctrina."), 
    	a2: "apoyar",
    	q3: ("CONTIENE LA Y. Concavidad u hondura formada en la tierra."), 
    	a3: "hoyo",
    	},
    },
    { letter: "z", status: 0, question: {
    	q1: ("CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional"), 
    	a1:  "zen",
    	q2: ("CON LA Z. Persona muy taimada, astuta y solapada."), 
    	a2: "zorro",
    	q3: ("CON LA Z. Comer o beber apresurada o excesivamente."), 
    	a3: "zampar",
    	},
    },
]

var rankingUsers = [];
var correct = 0;
var errors = 0;
var score = document.getElementById("correct");
var index = 0;                              //index of the questions
var answers;                               //variable used to interact with the answers
var q;                                     //variable used to interact with the questions




document.getElementById("startGame").onclick = function() {showQuestions(), timer() };
document.getElementById("skipWord").onclick = function() {passWord()};
document.getElementById("sendAnswer").onclick = function() {checkAnswers()};
document.getElementById("showQuestions").style.visibility = "hidden";           //questions board hidden by deafult
document.getElementById("talkToMe").checked = false;                           //TTS of by deafult



function showQuestions() {  //ask the questions

	var time = document.getElementById("time");
	document.getElementById("showQuestions").style.visibility = "visible";     //questions board becomes visible
	document.getElementById("startGame").style.visibility = "hidden";	       //pre-game instructions become hidden
	var questionNumber = Math.floor(Math.random()*3+1);                        //this gives a random number between 1-3. It indicates what question will read (q1,q2or q3)
	
	if (index < questions.length) {                                             
		
		if (questions[index].status === 0) {                                   //if there is a question with status 0, read it.
			
			if (questionNumber === 1){                                         //here, once questionNumber has chosen a question, overwrite the other questions. This way, if we choose "pasapalabra", for the next round it`ll always read be the same question. Otherwise, because it does random choice again it could be different
				q = questions[index].question.q1;
				answers = document.getElementById("askQuestion");
				answers.innerHTML = q;
				questions[index].question.q2 = questions[index].question.q1;
				questions[index].question.q3 = questions[index].question.q1;
				questions[index].question.a2 = questions[index].question.a1;
				questions[index].question.a3 = questions[index].question.a1;
				
                tts();
                
				
			} else if (questionNumber === 2) {
				q = questions[index].question.q2;
				answers = document.getElementById("askQuestion");
				answers.innerHTML = q;
				questions[index].question.q1 = questions[index].question.q2;
				questions[index].question.q3 = questions[index].question.q2;
				questions[index].question.a1 = questions[index].question.a2;
				questions[index].question.a3 = questions[index].question.a2;
				
                tts();
				
			} else if (questionNumber === 3) {
				q = questions[index].question.q3;
				answers = document.getElementById("askQuestion");
				answers.innerHTML = q;
				questions[index].question.q1 = questions[index].question.q3;
				questions[index].question.q2 = questions[index].question.q3;
				questions[index].question.a1 = questions[index].question.a3;
				questions[index].question.a2 = questions[index].question.a3;
				
                tts();
                		
			};

		} else if (questions[index].status === 1) {                           //if status is 1, jump the question
			index += 1;
			showQuestions()
		}
		
	} else {                                   //with this, if index is >= 27, reset index to 0 to start another round of questions (if there are any "pasapalabras" )                                                               
		 index = 0;
		showQuestions();
	}
	
}

function checkAnswers() {                                           //check the answers
	
    answers = document.getElementById("answer").value.toLowerCase();
	
	
	function correctAnswer() {
		questions[index].status = 1;
		correct += 1;
		score.innerHTML = correct;
		var x = document.getElementsByClassName("letters");
    	x[index].style.backgroundColor = "darkgreen";
    	document.forms["ansForm"].reset();
    	
	}
	function wrongAnswer() {
		questions[index].status = 1;
		errors += 1;
		var x = document.getElementsByClassName("letters");
    	x[index].style.backgroundColor = "red";
    	document.forms["ansForm"].reset(); 	
	}

	if (q === questions[index].question.q1 && answers === questions[index].question.a1){           //"q" holds the question.q = to q1,q2 or q3 check with their respectives answers, a1,a2 or a3

		correctAnswer();
		
	} else if (q === questions[index].question.q2 && answers === questions[index].question.a2) {

		correctAnswer();

	} else if (q === questions[index].question.q3 && answers === questions[index].question.a3) {

		correctAnswer()

	} else {                                                                                       
		
		wrongAnswer();
		
	};

	if ((correct + errors) == questions.length) {	                   //if run out of letters, end game
		endGame();
	};	
	
	showQuestions();
	
};

function passWord() {                                       //onclick "pasapalabra" button
		index +=1;
		showQuestions();	
	}

function timer() {                                         //crono. If time = 0, end game

	var seconds = 250;
	var s = document.getElementById("time");

	var countDown = setInterval(function() {
		seconds--;
		s.innerHTML = seconds;

		if (seconds === 0) {
			endGame();
			clearInterval(countDown);	
		}

	},1000)	

}


function endGame() {
	answers = document.getElementById("askQuestion");
	answers.innerHTML = "GAME OVER!<br><br> Has acertado "+ correct+" letras y has tenido "+ errors+" fallos.";	
	var ask = document.getElementById("showup").innerHTML;      //show html div showup instead the Score Board
	document.getElementById("playagain").innerHTML = ask;
}

function dontPlayAgain() {                              //goodbye if the answer in endGame() is NO
	document.getElementById("playagain").innerHTML = '<h3>¡Gracias por jugar! Esta versión de Pasapalabra ha sido hecha por <a href="https://github.com/AsierDev" target="_blank">Asier</a> como parte del precurso para <a href="https://twitter.com/SkylabCoders" target="_blank">SkyLab Coders</a></h3>	'

}

function tts() {                                        //if browser compatible, and swith on, read the question with HTML5 TTS 
    var read = document.getElementById("talkToMe").checked;
    if (read == true) {
    	if ("speechSynthesis" in window) {
    		var talk = new SpeechSynthesisUtterance(q);
    	   	talk.lang = 'es-ES';
    	   	window.speechSynthesis.speak(talk);
    	};   			
    } 
}
				